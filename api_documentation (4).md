# üìò API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üõ† –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–≤—É–º—è —Ç–∏–ø–∞–º–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π:
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/—Ä–∞–∑–¥–µ–ª—ã –∫–∞—Ç–∞–ª–æ–≥–∞.
- `item` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã.

–ó–∞–ø—Ä–æ—Å—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `POST`, –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ. –û—Ç–≤–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–∞–∫–∂–µ –≤ JSON.

---

## üîó Endpoint:
```
POST https://nails.nilit2.ru:8000/catalog.php
```

---

## üìù Request Format (—Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞)

```json
{
  "type": "category" | "item" | "catalog",
  "id": number | "NULL"
}
```

| –ü–æ–ª–µ | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|---------------|----------|
| `type` | string | ‚úÖ | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫—É—é —Å—É—â–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º: `category`, `item` –∏–ª–∏ `catalog` |
| `id` | number –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞ `"NULL"` | ‚úÖ | ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ —Ç–æ–≤–∞—Ä–∞. `"NULL"` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫–æ—Ä–Ω–µ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π |

---

## üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ `type`:

### üîπ type = `"category"`

#### –í–∞—Ä–∏–∞–Ω—Ç 1: `"id": "NULL"`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —É –∫–æ—Ç–æ—Ä—ã—Ö `id_parent IS NULL` (–∫–æ—Ä–Ω–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã).

#### –í–∞—Ä–∏–∞–Ω—Ç 2: `"id": —á–∏—Å–ª–æ`
- –°–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã —Å `id_parent = id`.
- –ï—Å–ª–∏ —Ç–∞–∫–∏—Ö –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **id —Ç–æ–≤–∞—Ä–æ–≤**, —É –∫–æ—Ç–æ—Ä—ã—Ö `id_section = id`.

---

### üî∏ type = `"item"`

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ –ø–æ –µ–≥–æ `id`.

---

### üî∏ type = `"catalog"` , `"id": "NULL"`

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É—Ç–∫—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–æ–≤.

---

## üì§ Response Format

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "data": [ /* –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ */ ]
}
```

### ‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```json
{
  "error": "Missing type or id"
}
```

### ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø:
```json
{
  "error": "Invalid type"
}
```

### ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π ID:
```json
{
  "error": "Invalid id"
}
```

### ‚ùå –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (–Ω–µ JSON!):
```text
query error
```
> ‚ö†Ô∏è *–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ: –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ SQL –≤–º–µ—Å—Ç–æ JSON –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç `query error`, —á—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.*

---

## üìå –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚ñ∂ –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–Ω–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```http
POST /catalog.php
Content-Type: application/json

{
  "type": "category",
  "id": "NULL"
}
```

### ‚ñ∂ –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å id = 5
```http
POST /catalog.php
Content-Type: application/json

{
  "type": "category",
  "id": 5
}
```

### ‚ñ∂ –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä —Å id = 10
```http
POST /catalog.php
Content-Type: application/json

{
  "type": "item",
  "id": 10
}
```
### ‚ñ∂ –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–∞
```http
POST /catalog.php
Content-Type: application/json

{
  "type": "catalog",
  "id": NULL
}
```
---

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- üß™ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: —Å—Ç—Ä–æ–∫–∞ `query error` –Ω–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ –∫–∞–∫ JSON ‚Äî —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Å–±–æ–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.